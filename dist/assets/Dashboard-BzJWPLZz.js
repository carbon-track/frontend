import{j as e}from"./motion-vendor-C11-9Hm-.js";import{h as Ua,r as h}from"./react-vendor-CFnAvB5y.js";import{c as Fa,u as La,Z as Ia,U as F,L as T,p as fa,B as E,P as Wa,C as Oa,W as va,aj as za}from"./index-CQ91Xfn2.js";import{C as f,a as j,b as y,c as N,d as v}from"./Card-CvB_sIzW.js";import{A as Ga,b as Ea,a as Ha}from"./Alert-B9j1D3yi.js";import{T as H}from"./trending-up-rf66WW_z.js";import{P as ja}from"./package-DOep28z1.js";import{A as L}from"./activity-Bpc2oucE.js";import{R as Ba}from"./refresh-cw-Ci8sJxJs.js";import{C as B}from"./clock-xsfGEZBf.js";import{A as Va}from"./arrow-up-right-s8lgh6Sp.js";import{R as ya,e as Ka,C as Qa,X as Xa,Y as Na,T as wa,f as ka,d as Ya,A as qa,b as Za,g as Ja,h as es,i as as}from"./charts-vendor-DJkHj7pX.js";import"./i18n-vendor-DK0x1_bH.js";/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]],M=Fa("chart-line",ss),V=[{start:"#60a5fa",end:"#3b82f6"},{start:"#34d399",end:"#10b981"},{start:"#a78bfa",end:"#8b5cf6"},{start:"#fbbf24",end:"#f59e0b"},{start:"#f472b6",end:"#ec4899"},{start:"#2dd4bf",end:"#14b8a6"},{start:"#fb923c",end:"#f97316"},{start:"#22d3ee",end:"#06b6d4"}],r=s=>{if(s==null)return 0;const u=Number(s);return Number.isFinite(u)?u:0},b=(s,u)=>!u||Number.isNaN(u)?0:s/u;function gs(){const{t:s}=La(),u=Ua(),[K,_a]=h.useState(!0),[Q,X]=h.useState(null),A=Ia(["adminStats"],async()=>{var t;return((t=(await za.getStats()).data)==null?void 0:t.data)||{}},{staleTime:15e3,refetchOnWindowFocus:!1,refetchInterval:K?3e4:!1,keepPreviousData:!0,onSuccess:a=>{if(a!=null&&a.generated_at){const t=new Date(a.generated_at);if(!Number.isNaN(t.getTime())){X(t);return}}X(new Date)}}),Y=A.data??{},I=A.isLoading,W=A.isError,O=A.error,Ca=A.refetch,q=A.isFetching,i=h.useMemo(()=>new Intl.NumberFormat,[]),m=h.useMemo(()=>new Intl.NumberFormat(void 0,{maximumFractionDigits:2}),[]),p=h.useMemo(()=>new Intl.NumberFormat(void 0,{style:"percent",maximumFractionDigits:1}),[]),Sa=h.useMemo(()=>new Intl.DateTimeFormat(void 0,{month:"short",day:"numeric"}),[]),Z=h.useMemo(()=>new Intl.DateTimeFormat(void 0,{year:"numeric",month:"short",day:"numeric"}),[]),z=(a,t)=>{if(!a)return a;const o=new Date(`${a}T00:00:00`);return Number.isNaN(o.getTime())?a:t.format(o)},G=a=>{if(!a)return"--";const t=new Date(a);return Number.isNaN(t.getTime())?a:t.toLocaleString()},n=h.useMemo(()=>{var C,g,R,$,se,te,re,ne,oe,de,ie,le,ce,me,he,ue,xe,be,pe,ge,fe,ve,je,ye,Ne,we,ke,_e,Ce,Se,De,Re,Ae,Pe,Te,$e,Me,Ue,Fe,Le,Ie,We,Oe,ze,Ge,Ee,He,Be,Ve,Ke,Qe,Xe,Ye,qe,Ze,Je,ea,aa,sa,ta,ra,na,oa,da,ia,la,ca,ma,ha,ua,xa,ba,pa,ga;const a=Y??{},t={total:r((C=a.users)==null?void 0:C.total_users),active:r((g=a.users)==null?void 0:g.active_users),inactive:r((R=a.users)==null?void 0:R.inactive_users),new30d:r(($=a.users)==null?void 0:$.new_users_30d),activeRatio:Number(((se=a.users)==null?void 0:se.active_ratio)??b(r((te=a.users)==null?void 0:te.active_users),r((re=a.users)==null?void 0:re.total_users))),newUsersRatio:Number(((ne=a.users)==null?void 0:ne.new_users_ratio)??b(r((oe=a.users)==null?void 0:oe.new_users_30d),r((de=a.users)==null?void 0:de.total_users)))},o={total:r((ie=a.transactions)==null?void 0:ie.total_transactions),pending:r((le=a.transactions)==null?void 0:le.pending_transactions),approved:r((ce=a.transactions)==null?void 0:ce.approved_transactions),rejected:r((me=a.transactions)==null?void 0:me.rejected_transactions),totalPointsAwarded:Number(((he=a.transactions)==null?void 0:he.total_points_awarded)??0),totalCarbonSaved:Number(((ue=a.transactions)==null?void 0:ue.total_carbon_saved)??((xe=a.carbon)==null?void 0:xe.total_carbon_saved)??0),approvalRate:Number(((be=a.transactions)==null?void 0:be.approval_rate)??b(r((pe=a.transactions)==null?void 0:pe.approved_transactions),r((ge=a.transactions)==null?void 0:ge.total_transactions))),pendingRatio:Number(((fe=a.transactions)==null?void 0:fe.pending_ratio)??b(r((ve=a.transactions)==null?void 0:ve.pending_transactions),r((je=a.transactions)==null?void 0:je.total_transactions))),avgPointsPerTransaction:Number(((ye=a.transactions)==null?void 0:ye.avg_points_per_transaction)??0),last7Transactions:r((Ne=a.transactions)==null?void 0:Ne.last7_transactions),last7PointsAwarded:Number(((we=a.transactions)==null?void 0:we.last7_points_awarded)??0)},d={total:r((ke=a.exchanges)==null?void 0:ke.total_exchanges),pending:r((_e=a.exchanges)==null?void 0:_e.pending_exchanges),completed:r((Ce=a.exchanges)==null?void 0:Ce.completed_exchanges),other:r((Se=a.exchanges)==null?void 0:Se.other_exchanges),totalPointsSpent:Number(((De=a.exchanges)==null?void 0:De.total_points_spent)??0),completionRate:Number(((Re=a.exchanges)==null?void 0:Re.completion_rate)??b(r((Ae=a.exchanges)==null?void 0:Ae.completed_exchanges),r((Pe=a.exchanges)==null?void 0:Pe.total_exchanges)))},l={total:r((Te=a.messages)==null?void 0:Te.total_messages),unread:r(($e=a.messages)==null?void 0:$e.unread_messages),read:r(((Me=a.messages)==null?void 0:Me.read_messages)??r((Ue=a.messages)==null?void 0:Ue.total_messages)-r((Fe=a.messages)==null?void 0:Fe.unread_messages)),unreadRatio:Number(((Le=a.messages)==null?void 0:Le.unread_ratio)??b(r((Ie=a.messages)==null?void 0:Ie.unread_messages),r((We=a.messages)==null?void 0:We.total_messages)))},c={totalRecords:r((Oe=a.activities)==null?void 0:Oe.total_records),approvedRecords:r((ze=a.activities)==null?void 0:ze.approved_records),pendingRecords:r((Ge=a.activities)==null?void 0:Ge.pending_records),rejectedRecords:r((Ee=a.activities)==null?void 0:Ee.rejected_records),catalogTotal:r((He=a.activities)==null?void 0:He.total_activities),catalogActive:r((Be=a.activities)==null?void 0:Be.active_activities),catalogInactive:r(((Ve=a.activities)==null?void 0:Ve.inactive_activities)??r((Ke=a.activities)==null?void 0:Ke.total_activities)-r((Qe=a.activities)==null?void 0:Qe.active_activities))},S={totalRecords:r((Xe=a.carbon)==null?void 0:Xe.total_records),pendingRecords:r((Ye=a.carbon)==null?void 0:Ye.pending_records),approvedRecords:r((qe=a.carbon)==null?void 0:qe.approved_records),rejectedRecords:r((Ze=a.carbon)==null?void 0:Ze.rejected_records),totalCarbonSaved:Number(((Je=a.carbon)==null?void 0:Je.total_carbon_saved)??0),totalPointsEarned:Number(((ea=a.carbon)==null?void 0:ea.total_points_earned)??0),last7CarbonSaved:Number(((aa=a.carbon)==null?void 0:aa.last7_carbon_saved)??0),last7PointsEarned:Number(((sa=a.carbon)==null?void 0:sa.last7_points_earned)??0),averageCarbonPerRecord:Number(((ta=a.carbon)==null?void 0:ta.average_carbon_per_record)??0),averageDailyCarbon:Number(((ra=a.carbon)==null?void 0:ra.average_daily_carbon)??0),approvalRate:Number(((na=a.carbon)==null?void 0:na.approval_rate)??b(r((oa=a.carbon)==null?void 0:oa.approved_records),r((da=a.carbon)==null?void 0:da.total_records)))},D=Array.isArray(a.trends)?a.trends.map(x=>({date:(x==null?void 0:x.date)??"",transactions:r(x==null?void 0:x.transactions),carbon_saved:r(x==null?void 0:x.carbon_saved),points_awarded:Number((x==null?void 0:x.points_awarded)??0),approved_records:r(x==null?void 0:x.approved_records)})):[],k={carbonLast7:Number(((ia=a.trend_summary)==null?void 0:ia.carbon_last7)??0),carbonPrev7:Number(((la=a.trend_summary)==null?void 0:la.carbon_prev7)??0),carbonDelta:Number(((ca=a.trend_summary)==null?void 0:ca.carbon_delta)??0),carbonDeltaRate:Number(((ma=a.trend_summary)==null?void 0:ma.carbon_delta_rate)??0),transactionsLast7:r((ha=a.trend_summary)==null?void 0:ha.transactions_last7),pointsLast7:Number(((ua=a.trend_summary)==null?void 0:ua.points_last7)??0),averageDailyCarbon30d:Number(((xa=a.trend_summary)==null?void 0:xa.average_daily_carbon_30d)??0)},_={pendingTransactions:Array.isArray((ba=a.recent)==null?void 0:ba.pending_transactions)?a.recent.pending_transactions:[],pendingCarbonRecords:Array.isArray((pa=a.recent)==null?void 0:pa.pending_carbon_records)?a.recent.pending_carbon_records:[],latestUsers:Array.isArray((ga=a.recent)==null?void 0:ga.latest_users)?a.recent.latest_users:[]};return{users:t,transactions:o,exchanges:d,messages:l,activities:c,carbon:S,trends:D,trendSummary:k,recent:_}},[Y]),J=h.useMemo(()=>{const a=n.trends;return a.length?a.map((t,o,d)=>{const l=Math.max(0,o-6),c=d.slice(l,o+1),S=b(c.reduce((k,_)=>k+_.carbon_saved,0),c.length||1),D=b(c.reduce((k,_)=>k+_.transactions,0),c.length||1);return{...t,carbon_avg:S,transactions_avg:D}}):[]},[n.trends]),w=n.trendSummary,ee=n.carbon,P=n.recent,Da=h.useMemo(()=>{const{pending:a,approved:t,rejected:o,total:d}=n.transactions,l=Math.max(d-(a+t+o),0),c=[{label:s("admin.dashboard.statusPending"),value:a},{label:s("admin.dashboard.statusApproved"),value:t},{label:s("admin.dashboard.statusRejected"),value:o}];return l>0&&c.push({label:s("admin.dashboard.statusOther"),value:l}),c},[n.transactions,s]),Ra=h.useMemo(()=>{const{pending:a,completed:t,total:o}=n.exchanges,d=Math.max(o-(a+t),0),l=[{label:s("admin.dashboard.statusPending"),value:a},{label:s("admin.dashboard.statusCompleted"),value:t}];return d>0&&l.push({label:s("admin.dashboard.statusOther"),value:d}),l},[n.exchanges,s]),Aa=h.useMemo(()=>{const{active:a,inactive:t,total:o}=n.users,d=Math.max(o-(a+t),0),l=[{label:s("admin.dashboard.statusActive"),value:a},{label:s("admin.dashboard.statusInactive"),value:t}];return d>0&&l.push({label:s("admin.dashboard.statusOther"),value:d}),l},[n.users,s]),Pa=h.useMemo(()=>[{label:s("admin.dashboard.unreadMessages"),value:n.messages.unread},{label:s("admin.dashboard.readMessages"),value:n.messages.read}],[n.messages,s]),Ta=h.useMemo(()=>{const{users:a,transactions:t,carbon:o,trendSummary:d}=n,l=a.activeRatio??b(a.active,a.total),c=t.avgPointsPerTransaction,S=t.last7PointsAwarded??0,D=o.pendingRecords??0,k=d.averageDailyCarbon30d??0,_=g=>{if(g==null)return"--";const R=Number(g);return Number.isFinite(R)?p.format(R):"--"},C=(g,R="")=>{if(g==null)return"--";const $=Number(g);return Number.isFinite($)?`${m.format($)}${R}`.trim():"--"};return[{key:"activeRatio",label:s("admin.dashboard.mini.activeRatio"),value:_(l)},{key:"avgPoints",label:s("admin.dashboard.mini.avgPointsPerTransaction"),value:C(c,` ${s("units.points")}`)},{key:"pointsLast7",label:s("admin.dashboard.mini.pointsLast7"),value:C(S,` ${s("units.points")}`)},{key:"pendingCarbon",label:s("admin.dashboard.mini.pendingCarbonRecords"),value:i.format(Math.max(0,D))},{key:"avgDailyCarbon",label:s("admin.dashboard.mini.averageDailyCarbon30d"),value:C(k,` ${s("units.kg")}`)}]},[n,s,p,m,i]),$a=h.useMemo(()=>{const{users:a,transactions:t,exchanges:o,messages:d,carbon:l,trendSummary:c}=n,S=Number.isFinite(t.approvalRate)?t.approvalRate:b(t.approved,t.total),D=a.active>0?l.totalCarbonSaved/a.active:0,k=Number.isFinite(d.unreadRatio)?d.unreadRatio:b(d.unread,d.total),_=t.totalPointsAwarded>0?o.totalPointsSpent/t.totalPointsAwarded:0,C=a.active>0?t.total/a.active:0,g=c.carbonPrev7>0||c.carbonLast7>0?c.carbonDelta>=0?s("admin.dashboard.insights.carbonLast7DaysDeltaPositive",{delta:m.format(c.carbonDelta),rate:p.format(Math.abs(c.carbonDeltaRate))}):s("admin.dashboard.insights.carbonLast7DaysDeltaNegative",{delta:m.format(Math.abs(c.carbonDelta)),rate:p.format(Math.abs(c.carbonDeltaRate))}):s("admin.dashboard.noData");return[{key:"approval",label:s("admin.dashboard.insights.approvalRate"),value:p.format(S),description:s("admin.dashboard.insights.approvalRateHint",{approved:i.format(t.approved),total:i.format(t.total)})},{key:"carbonPerUser",label:s("admin.dashboard.insights.carbonPerUser"),value:`${m.format(D)} ${s("units.kg")}`,description:s("admin.dashboard.insights.carbonPerUserHint",{active:i.format(a.active)})},{key:"weeklyCarbon",label:s("admin.dashboard.insights.carbonLast7Days"),value:`${m.format(c.carbonLast7)} ${s("units.kg")}`,description:g},{key:"unreadRate",label:s("admin.dashboard.insights.unreadRate"),value:p.format(k),description:s("admin.dashboard.insights.unreadRateHint",{unread:i.format(d.unread),total:i.format(d.total)})},{key:"pointsRedemption",label:s("admin.dashboard.insights.pointsRedemption"),value:p.format(_),description:s("admin.dashboard.insights.pointsRedemptionHint",{spent:i.format(o.totalPointsSpent),awarded:i.format(t.totalPointsAwarded)})},{key:"transactionsPerUser",label:s("admin.dashboard.insights.transactionsPerUser"),value:m.format(C),description:s("admin.dashboard.insights.transactionsPerUserHint",{active:i.format(a.active)})},{key:"dailyCarbon",label:s("admin.dashboard.insights.averageDailyCarbon"),value:`${m.format(l.averageDailyCarbon)} ${s("units.kg")}`,description:s("admin.dashboard.insights.averageDailyCarbonHint",{records:i.format(l.totalRecords)})}]},[n,s,i,m,p]),ae=h.useMemo(()=>n.trends.length?[...n.trends].sort((a,t)=>t.carbon_saved-a.carbon_saved).slice(0,5):[],[n.trends]),Ma=h.useMemo(()=>{const a=n.users.total?p.format(n.users.newUsersRatio??b(n.users.new30d,n.users.total)):s("admin.dashboard.noData"),t=w.carbonPrev7>0||w.carbonLast7>0?w.carbonDelta>=0?s("admin.dashboard.summaryCarbonTrendUp",{value:m.format(w.carbonDelta),rate:p.format(Math.abs(w.carbonDeltaRate))}):s("admin.dashboard.summaryCarbonTrendDown",{value:m.format(Math.abs(w.carbonDelta)),rate:p.format(Math.abs(w.carbonDeltaRate))}):s("admin.dashboard.noData");return[{key:"users",icon:F,title:s("admin.dashboard.totalUsers"),primary:i.format(n.users.total),secondary:`${s("admin.dashboard.activeUsers")}: ${i.format(n.users.active)}`,onClick:()=>u("/admin/users")},{key:"newUsers",icon:H,title:s("admin.dashboard.newUsers30d"),primary:i.format(n.users.new30d),secondary:n.users.total>0?s("admin.dashboard.newUsers30dShare",{value:a}):s("admin.dashboard.noData")},{key:"transactions",icon:M,title:s("admin.dashboard.totalTransactions"),primary:i.format(n.transactions.total),secondary:`${s("admin.dashboard.approvedTransactions")}: ${i.format(n.transactions.approved)} · ${s("admin.dashboard.pendingTransactions")}: ${i.format(n.transactions.pending)}`,onClick:()=>u("/admin/activities")},{key:"carbon",icon:T,title:s("admin.dashboard.totalCarbonSaved"),primary:`${m.format(ee.totalCarbonSaved)} ${s("units.kg")}`,secondary:`${s("admin.dashboard.totalPointsAwarded")}: ${i.format(n.transactions.totalPointsAwarded)}`},{key:"exchanges",icon:ja,title:s("admin.dashboard.totalExchanges"),primary:i.format(n.exchanges.total),secondary:`${s("admin.dashboard.pendingExchanges")}: ${i.format(n.exchanges.pending)} · ${s("admin.dashboard.totalPointsSpent")}: ${i.format(n.exchanges.totalPointsSpent)}`,onClick:()=>u("/admin/exchanges")},{key:"activities",icon:L,title:s("admin.dashboard.totalActivities"),primary:i.format(n.activities.totalRecords),secondary:`${s("admin.dashboard.approvedActivities")}: ${i.format(n.activities.approvedRecords)} · ${s("admin.dashboard.pendingActivities")}: ${i.format(n.activities.pendingRecords)}`,onClick:()=>u("/admin/activities")},{key:"messages",icon:fa,title:s("admin.dashboard.totalMessages"),primary:i.format(n.messages.total),secondary:`${s("admin.dashboard.unreadMessages")}: ${i.format(n.messages.unread)}`,onClick:()=>u("/admin/broadcast")},{key:"carbon7d",icon:T,title:s("admin.dashboard.carbonSaved7d"),primary:`${m.format(w.carbonLast7)} ${s("units.kg")}`,secondary:t}]},[n,w,s,i,m,p,u,ee]),U=a=>a.reduce((o,d)=>o+r(d.value),0)<=0?e.jsxs("div",{className:"flex h-full flex-col items-center justify-center space-y-3",children:[e.jsx("div",{className:"h-16 w-16 rounded-full bg-muted/50 flex items-center justify-center",children:e.jsx(L,{className:"h-8 w-8 text-muted-foreground/50"})}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s("admin.dashboard.noData")})]}):e.jsx(ya,{width:"100%",height:"100%",children:e.jsxs(Ja,{children:[e.jsxs("defs",{children:[V.map((o,d)=>e.jsxs("linearGradient",{id:`pieGradient-${d}`,x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:o.start,stopOpacity:.9}),e.jsx("stop",{offset:"100%",stopColor:o.end,stopOpacity:1})]},d)),V.map((o,d)=>e.jsxs("radialGradient",{id:`pieRadial-${d}`,children:[e.jsx("stop",{offset:"0%",stopColor:o.start,stopOpacity:1}),e.jsx("stop",{offset:"100%",stopColor:o.end,stopOpacity:.85})]},`radial-${d}`))]}),e.jsx(es,{data:a,dataKey:"value",nameKey:"label",innerRadius:55,outerRadius:85,paddingAngle:4,strokeWidth:3,stroke:"hsl(var(--background))",animationBegin:0,animationDuration:800,children:a.map((o,d)=>e.jsx(as,{fill:`url(#pieRadial-${d%V.length})`,className:"hover:opacity-80 transition-opacity duration-200 cursor-pointer",style:{filter:"drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1))"}},o.label))}),e.jsx(wa,{formatter:(o,d)=>[i.format(o),d],contentStyle:{backgroundColor:"hsl(var(--card))",border:"2px solid hsl(var(--border))",borderRadius:"12px",boxShadow:"0 10px 25px -5px rgb(0 0 0 / 0.1)",padding:"10px 14px"},itemStyle:{fontWeight:"500"},labelStyle:{fontWeight:"600",marginBottom:"6px",color:"hsl(var(--foreground))"}}),e.jsx(ka,{verticalAlign:"bottom",height:36,iconType:"circle",wrapperStyle:{paddingTop:"12px",fontSize:"12px",fontWeight:"500"}})]})});return e.jsxs("div",{className:"min-h-screen space-y-8 pb-8",children:[e.jsxs(f,{className:"border-2 hover:shadow-lg transition-shadow duration-300",children:[e.jsxs(j,{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-6",children:[e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-14 w-14 items-center justify-center rounded-2xl bg-gradient-to-br from-green-500 to-emerald-600 shadow-lg shadow-green-500/20",children:e.jsx(M,{className:"h-7 w-7 text-white"})}),e.jsxs("div",{children:[e.jsx(y,{className:"text-3xl font-bold tracking-tight bg-gradient-to-r from-green-600 to-emerald-600 bg-clip-text text-transparent",children:s("admin.dashboard.title")}),e.jsx(N,{className:"text-base mt-1",children:s("admin.dashboard.description")})]})]})}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 rounded-xl border border-border bg-card px-4 py-2.5 shadow-sm",children:[e.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-gray-300 text-green-600 focus:ring-2 focus:ring-green-500 focus:ring-offset-0",checked:K,onChange:a=>_a(a.target.checked)}),e.jsx("span",{className:"text-sm font-medium",children:s("admin.dashboard.autoRefresh")})]}),e.jsxs(E,{size:"default",className:"rounded-xl bg-gradient-to-r from-green-500 to-emerald-600 shadow-md hover:shadow-lg hover:from-green-600 hover:to-emerald-700 transition-all duration-200",onClick:()=>Ca(),disabled:q,children:[e.jsx(Ba,{className:`h-4 w-4 mr-2 ${q?"animate-spin":""}`}),s("admin.dashboard.refreshNow")]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground bg-muted/30 rounded-lg px-4 py-2 border border-border",children:[e.jsx(B,{className:"h-4 w-4 text-green-600"}),e.jsxs("span",{children:[s("admin.dashboard.lastUpdated"),": ",e.jsx("span",{className:"font-medium text-foreground",children:Q?Q.toLocaleString():"--"})]})]})]}),e.jsxs(v,{className:"pb-8",children:[I&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"h-16 w-16 rounded-full border-4 border-green-100 dark:border-green-900"}),e.jsx(Wa,{className:"absolute inset-0 m-auto h-16 w-16 animate-spin text-green-500"})]}),e.jsx("span",{className:"text-base font-medium text-muted-foreground",children:s("common.loading")})]}),W&&e.jsxs(Ga,{variant:"destructive",className:"border-2",children:[e.jsx(Oa,{className:"h-5 w-5"}),e.jsx(Ea,{className:"text-base",children:s("common.error")}),e.jsx(Ha,{className:"text-sm",children:(O==null?void 0:O.message)||s("errors.loadFailed")})]}),!I&&!W&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 xl:grid-cols-4",children:Ma.map((a,t)=>{const o=a.icon,d=["from-blue-500/10 to-blue-600/10 dark:from-blue-500/20 dark:to-blue-600/20","from-green-500/10 to-emerald-600/10 dark:from-green-500/20 dark:to-emerald-600/20","from-purple-500/10 to-violet-600/10 dark:from-purple-500/20 dark:to-violet-600/20","from-orange-500/10 to-amber-600/10 dark:from-orange-500/20 dark:to-amber-600/20","from-pink-500/10 to-rose-600/10 dark:from-pink-500/20 dark:to-rose-600/20","from-teal-500/10 to-cyan-600/10 dark:from-teal-500/20 dark:to-cyan-600/20","from-indigo-500/10 to-blue-600/10 dark:from-indigo-500/20 dark:to-blue-600/20","from-emerald-500/10 to-green-600/10 dark:from-emerald-500/20 dark:to-green-600/20"],l=["text-blue-600 dark:text-blue-400","text-green-600 dark:text-green-400","text-purple-600 dark:text-purple-400","text-orange-600 dark:text-orange-400","text-pink-600 dark:text-pink-400","text-teal-600 dark:text-teal-400","text-indigo-600 dark:text-indigo-400","text-emerald-600 dark:text-emerald-400"];return e.jsxs(f,{className:`group relative overflow-hidden border-2 transition-all duration-300 hover:shadow-xl hover:-translate-y-1 ${a.onClick?"cursor-pointer":""}`,onClick:a.onClick,children:[e.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${d[t%d.length]} opacity-0 group-hover:opacity-100 transition-opacity duration-300`}),e.jsxs(v,{className:"relative p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("div",{className:`flex h-14 w-14 items-center justify-center rounded-2xl bg-gradient-to-br ${d[t%d.length]} shadow-md group-hover:scale-110 transition-transform duration-300`,children:e.jsx(o,{className:`h-7 w-7 ${l[t%l.length]}`})}),a.onClick&&e.jsx(Va,{className:"h-5 w-5 text-muted-foreground opacity-0 group-hover:opacity-100 transition-opacity duration-200"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium uppercase tracking-wider text-muted-foreground",children:a.title}),e.jsx("p",{className:"text-3xl font-bold tracking-tight",children:a.primary}),e.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:a.secondary})]})]})]},a.key)})}),e.jsx("div",{className:"mt-6 grid grid-cols-2 gap-4 lg:grid-cols-5",children:Ta.map((a,t)=>{const o=["border-l-blue-500","border-l-green-500","border-l-purple-500","border-l-orange-500","border-l-pink-500"];return e.jsxs("div",{className:`group rounded-xl border-2 border-l-4 ${o[t%o.length]} bg-card/50 backdrop-blur p-4 transition-all duration-300 hover:shadow-md hover:-translate-y-0.5`,children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground mb-2",children:a.label}),e.jsx("p",{className:"text-xl font-bold group-hover:scale-105 transition-transform duration-200",children:a.value})]},a.key)})})]})]})]}),"      ",!I&&!W&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid gap-6 xl:grid-cols-3",children:[e.jsxs(f,{className:"xl:col-span-2 border-2 hover:shadow-lg transition-shadow duration-300",children:[e.jsx(j,{className:"space-y-4",children:e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs(y,{className:"flex items-center gap-2 text-2xl",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-purple-500/10 to-violet-600/10",children:e.jsx(L,{className:"h-5 w-5 text-purple-600"})}),s("admin.dashboard.trendsTitle")]}),e.jsx(N,{className:"text-sm",children:s("admin.dashboard.trendsSubtitle")})]}),e.jsxs(E,{variant:"outline",size:"sm",className:"rounded-xl border-2 hover:bg-purple-50 hover:border-purple-200 dark:hover:bg-purple-950/30 transition-all duration-200",onClick:()=>u("/admin/activities"),children:[e.jsx(M,{className:"h-4 w-4 mr-2"}),s("admin.dashboard.viewActivities")]})]})}),e.jsx(v,{className:"h-96 pb-6",children:J.length?e.jsx(ya,{width:"100%",height:"100%",children:e.jsxs(Ka,{data:J,margin:{top:10,right:20,left:0,bottom:0},children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"colorCarbon",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#10b981",stopOpacity:.4}),e.jsx("stop",{offset:"95%",stopColor:"#10b981",stopOpacity:.05})]}),e.jsxs("linearGradient",{id:"barGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:"#8b5cf6",stopOpacity:.9}),e.jsx("stop",{offset:"100%",stopColor:"#a78bfa",stopOpacity:.8})]})]}),e.jsx(Qa,{strokeDasharray:"3 3",stroke:"hsl(var(--border))",opacity:.3}),e.jsx(Xa,{dataKey:"date",minTickGap:20,tickFormatter:a=>z(a,Sa),stroke:"hsl(var(--muted-foreground))",style:{fontSize:"12px"}}),e.jsx(Na,{yAxisId:"left",allowDecimals:!1,stroke:"#8b5cf6",style:{fontSize:"12px",fontWeight:"500"}}),e.jsx(Na,{yAxisId:"right",orientation:"right",tickFormatter:a=>m.format(a),stroke:"#10b981",style:{fontSize:"12px",fontWeight:"500"}}),e.jsx(wa,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"2px solid hsl(var(--border))",borderRadius:"12px",boxShadow:"0 10px 25px -5px rgb(0 0 0 / 0.1)",padding:"12px"},labelStyle:{fontWeight:"600",marginBottom:"8px",color:"hsl(var(--foreground))"},labelFormatter:a=>z(a,Z),formatter:(a,t)=>typeof a=="number"?t===s("admin.dashboard.trendsCarbonSaved")||t===s("admin.dashboard.trendsCarbonAverage")?[`${m.format(a)} ${s("units.kg")}`,t]:[i.format(a),t]:[a,t]}),e.jsx(ka,{wrapperStyle:{paddingTop:"20px",fontSize:"13px",fontWeight:"500"},iconType:"circle"}),e.jsx(Ya,{yAxisId:"left",dataKey:"transactions",name:s("admin.dashboard.trendsTransactions"),fill:"url(#barGradient)",radius:[8,8,0,0],maxBarSize:60}),e.jsx(qa,{yAxisId:"right",type:"monotone",dataKey:"carbon_saved",name:s("admin.dashboard.trendsCarbonSaved"),stroke:"#10b981",fill:"url(#colorCarbon)",strokeWidth:3,dot:{r:5,strokeWidth:2,fill:"#ffffff",stroke:"#10b981"},activeDot:{r:7,strokeWidth:2}}),e.jsx(Za,{yAxisId:"right",type:"monotone",dataKey:"carbon_avg",name:s("admin.dashboard.trendsCarbonAverage"),stroke:"#f59e0b",strokeWidth:3,strokeDasharray:"8 4",dot:!1})]})}):e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"h-16 w-16 rounded-full bg-muted/50 flex items-center justify-center",children:e.jsx(M,{className:"h-8 w-8 text-muted-foreground/50"})})}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s("admin.dashboard.noData")})]})})})]}),e.jsxs(f,{className:"border-2 hover:shadow-lg transition-shadow duration-300",children:[e.jsxs(j,{className:"space-y-2",children:[e.jsxs(y,{className:"flex items-center gap-2 text-xl",children:[e.jsx(va,{className:"h-5 w-5 text-yellow-500"}),s("admin.dashboard.keyInsights")]}),e.jsx(N,{className:"text-sm",children:s("admin.dashboard.keyInsightsSubtitle")})]}),e.jsx(v,{className:"space-y-3 pb-6",children:$a.map((a,t)=>{const o=["from-blue-50 to-blue-100/50 dark:from-blue-950/30 dark:to-blue-900/20","from-green-50 to-green-100/50 dark:from-green-950/30 dark:to-green-900/20","from-purple-50 to-purple-100/50 dark:from-purple-950/30 dark:to-purple-900/20","from-orange-50 to-orange-100/50 dark:from-orange-950/30 dark:to-orange-900/20","from-pink-50 to-pink-100/50 dark:from-pink-950/30 dark:to-pink-900/20","from-teal-50 to-teal-100/50 dark:from-teal-950/30 dark:to-teal-900/20","from-indigo-50 to-indigo-100/50 dark:from-indigo-950/30 dark:to-indigo-900/20"];return e.jsxs("div",{className:`group rounded-xl border-2 bg-gradient-to-br ${o[t%o.length]} p-4 transition-all duration-300 hover:shadow-md hover:-translate-y-0.5`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wide",children:a.label}),e.jsx("span",{className:"text-xl font-bold group-hover:scale-110 transition-transform duration-200",children:a.value})]}),e.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:a.description})]},a.key)})})]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2 xl:grid-cols-4",children:[e.jsxs(f,{className:"group border-2 hover:shadow-xl transition-all duration-300 hover:-translate-y-1",children:[e.jsxs(j,{className:"space-y-2",children:[e.jsxs(y,{className:"flex items-center gap-2 text-lg",children:[e.jsx("div",{className:"h-8 w-8 rounded-lg bg-gradient-to-br from-blue-500/10 to-blue-600/10 flex items-center justify-center group-hover:scale-110 transition-transform duration-200",children:e.jsx(M,{className:"h-4 w-4 text-blue-600"})}),s("admin.dashboard.transactionStatusTitle")]}),e.jsx(N,{className:"text-xs",children:s("admin.dashboard.transactionStatusSubtitle")})]}),e.jsx(v,{className:"h-72 pb-4",children:U(Da)})]}),e.jsxs(f,{className:"group border-2 hover:shadow-xl transition-all duration-300 hover:-translate-y-1",children:[e.jsxs(j,{className:"space-y-2",children:[e.jsxs(y,{className:"flex items-center gap-2 text-lg",children:[e.jsx("div",{className:"h-8 w-8 rounded-lg bg-gradient-to-br from-green-500/10 to-green-600/10 flex items-center justify-center group-hover:scale-110 transition-transform duration-200",children:e.jsx(F,{className:"h-4 w-4 text-green-600"})}),s("admin.dashboard.userStatusTitle")]}),e.jsx(N,{className:"text-xs",children:s("admin.dashboard.userStatusSubtitle",{newUsers:i.format(n.users.new30d)})})]}),e.jsx(v,{className:"h-72 pb-4",children:U(Aa)})]}),e.jsxs(f,{className:"group border-2 hover:shadow-xl transition-all duration-300 hover:-translate-y-1",children:[e.jsxs(j,{className:"space-y-2",children:[e.jsxs(y,{className:"flex items-center gap-2 text-lg",children:[e.jsx("div",{className:"h-8 w-8 rounded-lg bg-gradient-to-br from-purple-500/10 to-purple-600/10 flex items-center justify-center group-hover:scale-110 transition-transform duration-200",children:e.jsx(ja,{className:"h-4 w-4 text-purple-600"})}),s("admin.dashboard.exchangeStatusTitle")]}),e.jsx(N,{className:"text-xs",children:s("admin.dashboard.exchangeStatusSubtitle")})]}),e.jsx(v,{className:"h-72 pb-4",children:U(Ra)})]}),e.jsxs(f,{className:"group border-2 hover:shadow-xl transition-all duration-300 hover:-translate-y-1",children:[e.jsxs(j,{className:"space-y-2",children:[e.jsxs(y,{className:"flex items-center gap-2 text-lg",children:[e.jsx("div",{className:"h-8 w-8 rounded-lg bg-gradient-to-br from-orange-500/10 to-orange-600/10 flex items-center justify-center group-hover:scale-110 transition-transform duration-200",children:e.jsx(fa,{className:"h-4 w-4 text-orange-600"})}),s("admin.dashboard.messageStatusTitle")]}),e.jsx(N,{className:"text-xs",children:s("admin.dashboard.messageStatusSubtitle")})]}),e.jsx(v,{className:"h-72 pb-4",children:U(Pa)})]})]}),e.jsxs(f,{className:"border-2 hover:shadow-lg transition-shadow duration-300",children:[e.jsx(j,{className:"space-y-3",children:e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs(y,{className:"flex items-center gap-2 text-2xl",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-green-500/10 to-emerald-600/10",children:e.jsx(H,{className:"h-5 w-5 text-green-600"})}),s("admin.dashboard.topCarbonDaysTitle")]}),e.jsx(N,{className:"text-sm",children:s("admin.dashboard.topCarbonDaysSubtitle")})]}),e.jsxs(E,{variant:"outline",size:"sm",className:"rounded-xl border-2 hover:bg-green-50 hover:border-green-200 dark:hover:bg-green-950/30 transition-all duration-200",onClick:()=>u("/admin/activities"),children:[e.jsx(L,{className:"h-4 w-4 mr-2"}),s("admin.dashboard.viewActivities")]})]})}),e.jsx(v,{className:"pb-6",children:ae.length?e.jsx("div",{className:"space-y-3",children:ae.map((a,t)=>{const o=["from-yellow-400 to-yellow-600 text-white shadow-lg shadow-yellow-500/30","from-gray-300 to-gray-500 text-white shadow-lg shadow-gray-500/30","from-orange-400 to-orange-600 text-white shadow-lg shadow-orange-500/30","from-blue-400 to-blue-600 text-white","from-purple-400 to-purple-600 text-white"];return e.jsxs("div",{className:"group flex items-center gap-4 rounded-xl border-2 bg-gradient-to-r from-card to-muted/20 px-5 py-4 transition-all duration-300 hover:shadow-md hover:-translate-y-0.5",children:[e.jsx("div",{className:`flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-full bg-gradient-to-br ${o[t]} font-bold transition-transform duration-200 group-hover:scale-110`,children:t+1}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-semibold text-base truncate",children:z(a.date,Z)}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-0.5",children:[s("admin.dashboard.trendsTransactions"),": ",e.jsx("span",{className:"font-medium text-foreground",children:i.format(a.transactions)})]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-right",children:[e.jsx(T,{className:"h-5 w-5 text-green-600 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold whitespace-nowrap",children:m.format(a.carbon_saved)}),e.jsx("div",{className:"text-xs text-muted-foreground",children:s("units.kg")})]})]})]},a.date)})}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 space-y-3",children:[e.jsx("div",{className:"h-16 w-16 rounded-full bg-muted/50 flex items-center justify-center",children:e.jsx(H,{className:"h-8 w-8 text-muted-foreground/50"})}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s("admin.dashboard.noData")})]})})]}),e.jsxs("div",{className:"grid gap-6 xl:grid-cols-3",children:[e.jsxs(f,{className:"border-2 hover:shadow-lg transition-shadow duration-300",children:[e.jsxs(j,{className:"space-y-2",children:[e.jsxs(y,{className:"flex items-center gap-2 text-lg",children:[e.jsx("div",{className:"h-8 w-8 rounded-lg bg-gradient-to-br from-amber-500/10 to-amber-600/10 flex items-center justify-center",children:e.jsx(B,{className:"h-4 w-4 text-amber-600"})}),s("admin.dashboard.recentPendingTransactions")]}),e.jsx(N,{className:"text-xs",children:s("admin.dashboard.recentPendingTransactionsSubtitle")})]}),e.jsx(v,{className:"space-y-3 pb-6",children:P.pendingTransactions.length?P.pendingTransactions.map((a,t)=>e.jsxs("div",{className:"group rounded-xl border-2 bg-gradient-to-r from-card to-amber-50/30 dark:to-amber-950/10 px-4 py-3 transition-all duration-300 hover:shadow-md hover:-translate-y-0.5",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 mb-2",children:[e.jsx("span",{className:"font-semibold text-sm truncate",children:a.username||s("admin.dashboard.unknownUser")}),e.jsxs("div",{className:"flex items-center gap-1.5 font-mono text-sm font-bold text-amber-700 dark:text-amber-400 whitespace-nowrap",children:[e.jsx(va,{className:"h-3.5 w-3.5"}),m.format(r(a.points))]})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[e.jsx("span",{className:"truncate",children:G(a.created_at)}),e.jsx("span",{className:"uppercase tracking-wider font-semibold px-2 py-0.5 rounded-md bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-300",children:a.status})]})]},a.id)):e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 space-y-2",children:[e.jsx("div",{className:"h-12 w-12 rounded-full bg-muted/50 flex items-center justify-center",children:e.jsx(B,{className:"h-6 w-6 text-muted-foreground/50"})}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s("admin.dashboard.noPendingTransactions")})]})})]}),e.jsxs(f,{className:"border-2 hover:shadow-lg transition-shadow duration-300",children:[e.jsxs(j,{className:"space-y-2",children:[e.jsxs(y,{className:"flex items-center gap-2 text-lg",children:[e.jsx("div",{className:"h-8 w-8 rounded-lg bg-gradient-to-br from-green-500/10 to-emerald-600/10 flex items-center justify-center",children:e.jsx(T,{className:"h-4 w-4 text-green-600"})}),s("admin.dashboard.recentPendingCarbon")]}),e.jsx(N,{className:"text-xs",children:s("admin.dashboard.recentPendingCarbonSubtitle")})]}),e.jsx(v,{className:"space-y-3 pb-6",children:P.pendingCarbonRecords.length?P.pendingCarbonRecords.map(a=>e.jsxs("div",{className:"group rounded-xl border-2 bg-gradient-to-r from-card to-green-50/30 dark:to-green-950/10 px-4 py-3 transition-all duration-300 hover:shadow-md hover:-translate-y-0.5",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 mb-2",children:[e.jsx("span",{className:"font-semibold text-sm truncate",children:a.activity_name_en||a.activity_name_zh||a.activity_id||s("admin.dashboard.unknownActivity")}),e.jsxs("div",{className:"flex items-center gap-1.5 font-mono text-sm font-bold text-green-700 dark:text-green-400 whitespace-nowrap",children:[e.jsx(T,{className:"h-3.5 w-3.5"}),m.format(r(a.carbon_saved))]})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[e.jsx("span",{className:"truncate",children:a.username||s("admin.dashboard.unknownUser")}),e.jsx("span",{className:"truncate",children:G(a.created_at)})]})]},a.id)):e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 space-y-2",children:[e.jsx("div",{className:"h-12 w-12 rounded-full bg-muted/50 flex items-center justify-center",children:e.jsx(T,{className:"h-6 w-6 text-muted-foreground/50"})}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s("admin.dashboard.noPendingCarbon")})]})})]}),e.jsxs(f,{className:"border-2 hover:shadow-lg transition-shadow duration-300",children:[e.jsxs(j,{className:"space-y-2",children:[e.jsxs(y,{className:"flex items-center gap-2 text-lg",children:[e.jsx("div",{className:"h-8 w-8 rounded-lg bg-gradient-to-br from-blue-500/10 to-blue-600/10 flex items-center justify-center",children:e.jsx(F,{className:"h-4 w-4 text-blue-600"})}),s("admin.dashboard.latestUsers")]}),e.jsx(N,{className:"text-xs",children:s("admin.dashboard.latestUsersSubtitle")})]}),e.jsx(v,{className:"space-y-3 pb-6",children:P.latestUsers.length?P.latestUsers.map(a=>e.jsxs("div",{className:"group rounded-xl border-2 bg-gradient-to-r from-card to-blue-50/30 dark:to-blue-950/10 px-4 py-3 transition-all duration-300 hover:shadow-md hover:-translate-y-0.5",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 mb-1",children:[e.jsx("span",{className:"font-semibold text-sm truncate",children:a.username}),e.jsx("span",{className:"text-xs uppercase tracking-wider font-semibold px-2 py-0.5 rounded-md bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300 whitespace-nowrap",children:a.status||s("admin.dashboard.statusUnknown")})]}),e.jsx("div",{className:"text-xs text-muted-foreground truncate mb-1",children:a.email||s("admin.dashboard.noEmail")}),e.jsx("div",{className:"text-xs text-muted-foreground",children:G(a.created_at)})]},a.id)):e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 space-y-2",children:[e.jsx("div",{className:"h-12 w-12 rounded-full bg-muted/50 flex items-center justify-center",children:e.jsx(F,{className:"h-6 w-6 text-muted-foreground/50"})}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s("admin.dashboard.noRecentUsers")})]})})]})]})]})]})}export{gs as default};
