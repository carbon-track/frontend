import{u as b,r,j as t,I as S}from"./index-C0FjIuQY.js";function C({countryCode:n,stateCode:d,onCountryChange:g,onStateChange:u,errors:o={}}){const{t:s,i18n:f}=b(),[l,p]=r.useState([]),[m,c]=r.useState([]),[j,h]=r.useState(!0);r.useEffect(()=>{(async()=>{try{const i=await(await fetch("/locales/states.json")).json();p(i),h(!1)}catch(a){console.error("Failed to load countries data:",a),h(!1)}})()},[]),r.useEffect(()=>{if(n&&l.length>0){const e=l.find(a=>a.iso2===n);c(e?e.states||[]:[])}else c([])},[n,l]);const v=e=>{const a=e.target.value;g(a),u("")},x=e=>{u(e.target.value)},y=e=>{var i;return f.language.startsWith("zh")&&((i=e.translations)!=null&&i.cn)?e.translations.cn:e.name};return j?t.jsx("div",{className:"text-sm text-gray-500",children:"Loading regions..."}):t.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"country",className:"block text-sm font-medium text-gray-700",children:s("auth.country","Country")}),t.jsxs("div",{className:"mt-1",children:[t.jsxs("select",{id:"country",value:n,onChange:v,className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm",children:[t.jsx("option",{value:"",children:s("auth.selectCountry","Select Country")}),l.map(e=>t.jsx("option",{value:e.iso2,children:y(e)},e.iso2))]}),o.country&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.country.message||s("auth.countryRequired","Country is required")})]})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"state",className:"block text-sm font-medium text-gray-700",children:s("auth.state","State/Province")}),t.jsxs("div",{className:"mt-1",children:[m.length>0?t.jsxs("select",{id:"state",value:d,onChange:x,className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm",disabled:!n,children:[t.jsx("option",{value:"",children:s("auth.selectState","Select State")}),m.map(e=>t.jsx("option",{value:e.state_code,children:e.name},e.id))]}):t.jsx(S,{id:"state",type:"text",value:d,onChange:x,placeholder:s("auth.statePlaceholder","Enter State/Province"),disabled:!n}),o.state&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.state.message||s("auth.stateRequired","State is required")})]})]})]})}export{C as R};
