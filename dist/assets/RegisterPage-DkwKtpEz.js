import{c as _,u as A,d as R,r as c,j as e,a as m,v as i,B as q,f as L,e as T}from"./index-BKjOfV5l.js";import{u as U}from"./index.esm-B6HbNfYb.js";import{I as o}from"./Input-CQCfPgps.js";import{C as B,a as D,b as H,d as M,c as O}from"./Card-BjV_5Hz9.js";import{A as f,a as N}from"./Alert-Tl0dtwbA.js";import{E as y}from"./eye-off-4eAEubg_.js";import{E as w}from"./eye-CXemIeRw.js";/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],G=_("user-plus",z);function J(){const{t:s}=A(),v=R(),[n,b]=c.useState(!1),[d,P]=c.useState(!1),[u,h]=c.useState(""),[p,j]=c.useState(""),[x,g]=c.useState(!1),[S,k]=c.useState([]),{register:l,handleSubmit:C,watch:I,formState:{errors:a}}=U(),F=I("password");c.useEffect(()=>{(async()=>{try{const r=await L.get("/schools");r.data.success&&k(r.data.data)}catch(r){console.error("Failed to fetch schools:",r)}})()},[]);const E=async t=>{g(!0),h(""),j("");try{const r=await T.register({username:t.username,email:t.email,password:t.password,confirm_password:t.confirmPassword,real_name:t.realName,school_id:parseInt(t.schoolId),class_name:t.className,turnstile_token:t.turnstile_token});r.success?(j(s("auth.registerSuccess")),setTimeout(()=>{v("/login")},2e3)):h(r.message||s("auth.registerFailed"))}catch(r){h(r.message||s("auth.registerFailed"))}finally{g(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto h-12 w-12 flex items-center justify-center rounded-full bg-green-100",children:e.jsx(G,{className:"h-6 w-6 text-green-600"})}),e.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:s("auth.createAccount")}),e.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:[s("auth.orSignInPrompt")," ",e.jsx(m,{to:"/auth/login",className:"font-medium text-green-600 hover:text-green-500",children:s("auth.signIn")})]})]}),e.jsxs(B,{children:[e.jsxs(D,{children:[e.jsx(H,{children:s("auth.signUp")}),e.jsx(M,{children:s("auth.fillInformation")})]}),e.jsx(O,{children:e.jsxs("form",{onSubmit:C(E),className:"space-y-6",children:[u&&e.jsx(f,{variant:"destructive",children:e.jsx(N,{children:u})}),p&&e.jsx(f,{variant:"success",children:e.jsx(N,{children:p})}),e.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700",children:s("auth.username")}),e.jsxs("div",{className:"mt-1",children:[e.jsx(o,{id:"username",type:"text",autoComplete:"username",placeholder:s("auth.usernamePlaceholder"),error:a.username,...l("username",i.username)}),a.username&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.username.message})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:s("auth.email")}),e.jsxs("div",{className:"mt-1",children:[e.jsx(o,{id:"email",type:"email",autoComplete:"email",placeholder:s("auth.emailPlaceholder"),error:a.email,...l("email",i.email)}),a.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.email.message})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"realName",className:"block text-sm font-medium text-gray-700",children:s("auth.realName")}),e.jsxs("div",{className:"mt-1",children:[e.jsx(o,{id:"realName",type:"text",autoComplete:"name",placeholder:s("auth.realNamePlaceholder"),error:a.realName,...l("realName",i.realName)}),a.realName&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.realName.message})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"schoolId",className:"block text-sm font-medium text-gray-700",children:s("auth.school")}),e.jsxs("div",{className:"mt-1",children:[e.jsxs("select",{id:"schoolId",className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500",...l("schoolId",{required:s("auth.schoolRequired")}),children:[e.jsx("option",{value:"",children:s("auth.selectSchool")}),S.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]}),a.schoolId&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.schoolId.message})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"className",className:"block text-sm font-medium text-gray-700",children:s("auth.className")}),e.jsxs("div",{className:"mt-1",children:[e.jsx(o,{id:"className",type:"text",placeholder:s("auth.classNamePlaceholder"),error:a.className,...l("className",i.className)}),a.className&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.className.message})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:s("auth.password")}),e.jsxs("div",{className:"mt-1 relative",children:[e.jsx(o,{id:"password",type:n?"text":"password",autoComplete:"new-password",placeholder:s("auth.passwordPlaceholder"),error:a.password,...l("password",i.password)}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>b(!n),children:n?e.jsx(y,{className:"h-4 w-4 text-gray-400"}):e.jsx(w,{className:"h-4 w-4 text-gray-400"})}),a.password&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.password.message})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:s("auth.confirmPassword")}),e.jsxs("div",{className:"mt-1 relative",children:[e.jsx(o,{id:"confirmPassword",type:d?"text":"password",autoComplete:"new-password",placeholder:s("auth.confirmPasswordPlaceholder"),error:a.confirmPassword,...l("confirmPassword",{required:s("auth.confirmPasswordRequired"),validate:t=>t===F||s("auth.passwordMismatch")})}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>P(!d),children:d?e.jsx(y,{className:"h-4 w-4 text-gray-400"}):e.jsx(w,{className:"h-4 w-4 text-gray-400"})}),a.confirmPassword&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.confirmPassword.message})]})]})]}),e.jsx("div",{id:"turnstile-container",className:"flex justify-center"}),e.jsx("div",{children:e.jsx(q,{type:"submit",className:"w-full",loading:x,disabled:x,children:s(x?"auth.registering":"auth.signUp")})}),e.jsx("div",{className:"text-sm text-gray-600",children:e.jsxs("p",{children:[s("auth.agreementText")," ",e.jsx(m,{to:"/terms",className:"text-green-600 hover:text-green-500",children:s("auth.termsOfService")})," ",s("auth.and")," ",e.jsx(m,{to:"/privacy",className:"text-green-600 hover:text-green-500",children:s("auth.privacyPolicy")})]})})]})})]}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-sm text-gray-600",children:[s("auth.haveAccount")," ",e.jsx(m,{to:"/login",className:"font-medium text-green-600 hover:text-green-500",children:s("auth.signInNow")})]})})]})})}function $(){return e.jsx(J,{})}export{$ as default};
