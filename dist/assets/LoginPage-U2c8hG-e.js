import{c as S,u as L,e as P,r as l,j as e,L as h,I as v,g as T,B as A,f as F,h as R}from"./index-9oiziVwF.js";import{u as M}from"./index.esm-CHdFkG8q.js";import{C as O,a as U,b as _,c as D,d as V}from"./Card-DiZzX4G1.js";import{A as B,a as H}from"./Alert-DMTWhZOi.js";import{T as $}from"./Turnstile-CFijfuaa.js";import{E as q}from"./eye-off-BVqitGWE.js";import{E as z}from"./eye-QkcRAVlH.js";/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]],J=S("log-in",G);function K(){const{t:s}=L(),b=P(),[c,E]=l.useState(!1),[g,d]=l.useState(""),[m,f]=l.useState(!1),p=l.useRef(null),[j,u]=l.useState(""),{register:y,handleSubmit:k,formState:{errors:a}}=M(),N=T(),w=(t,n=s("auth.loginFailed"))=>{if(!t||typeof t!="object")return n;const r=t.message||t.error||n,i=t.code;return i?s(`auth.errors.${i}`,{defaultValue:r}):r},C=async t=>{var n,r,i;f(!0),d("");try{const o=await F.login({identifier:t.identifier,password:t.password,cf_turnstile_response:j||void 0});if(o.success){const x=R();b(x)}else d(w(o))}catch(o){const x=(n=o.response)==null?void 0:n.data,I=o.response?s("auth.loginFailed"):s("errors.network");d(w(x,I)),(i=(r=p.current)==null?void 0:r.reset)==null||i.call(r)}finally{f(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto h-12 w-12 flex items-center justify-center rounded-full bg-green-100",children:e.jsx(J,{className:"h-6 w-6 text-green-600"})}),e.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:s("auth.signInToAccount")}),e.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:[s("auth.orSignUpPrompt")," ",e.jsx(h,{to:"/auth/register",className:"font-medium text-green-600 hover:text-green-500",children:s("auth.signUp")})]})]}),e.jsxs(O,{children:[e.jsxs(U,{children:[e.jsx(_,{children:s("auth.signIn")}),e.jsx(D,{children:s("auth.enterCredentials")})]}),e.jsx(V,{children:e.jsxs("form",{onSubmit:k(C),className:"space-y-6",children:[g&&e.jsx(B,{variant:"destructive",children:e.jsx(H,{children:g})}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"identifier",className:"block text-sm font-medium text-gray-700",children:s("auth.usernameOrEmail")}),e.jsxs("div",{className:"mt-1",children:[e.jsx(v,{id:"identifier",type:"text",autoComplete:"username",placeholder:s("auth.usernameOrEmailPlaceholder"),error:a.identifier,...y("identifier",N.usernameOrEmail)}),a.identifier&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.identifier.message})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:s("auth.password")}),e.jsxs("div",{className:"mt-1 relative",children:[e.jsx(v,{id:"password",type:c?"text":"password",autoComplete:"current-password",placeholder:s("auth.passwordPlaceholder"),error:a.password,...y("password",N.password)}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>E(!c),children:c?e.jsx(q,{className:"h-4 w-4 text-gray-400"}):e.jsx(z,{className:"h-4 w-4 text-gray-400"})}),a.password&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.password.message})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-900",children:s("auth.rememberMe")})]}),e.jsx("div",{className:"text-sm",children:e.jsx(h,{to:"/auth/forgot-password",className:"font-medium text-green-600 hover:text-green-500",children:s("auth.forgotPassword")})})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx($,{ref:p,className:"mt-2",onVerify:t=>u(t),onExpire:()=>u(""),onError:()=>u("")})}),e.jsx("div",{children:e.jsx(A,{type:"submit",className:"w-full",loading:m,disabled:m||!j,children:s(m?"auth.signingIn":"auth.signIn")})})]})})]}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-sm text-gray-600",children:[s("auth.noAccount")," ",e.jsx(h,{to:"/auth/register",className:"font-medium text-green-600 hover:text-green-500",children:s("auth.createAccount")})]})})]})})}function te(){return e.jsx(K,{})}export{te as default};
