import{c as R,u as Q,j as e,B as o,r as m,X as $,s as ae,t as re,l as ne,w as X,S as le,b as ce}from"./index-BKjOfV5l.js";import{C as L,a as G,b as H,d as B,c as I}from"./Card-BjV_5Hz9.js";import{C as ie}from"./clock-CO_6aMIU.js";import{I as q}from"./Input-CQCfPgps.js";import{F as W}from"./funnel-Ch0r0Cl2.js";import{S as oe}from"./search-B4M-0oqD.js";import{A as Y}from"./Alert-Tl0dtwbA.js";import{C as de}from"./circle-alert-IgYmallE.js";import{C as xe}from"./circle-check-big-iU2hGy9Z.js";/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]],Z=R("coins",me);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],ge=R("history",he);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],T=R("package",ue);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],ee=R("shopping-cart",pe);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],se=R("star",je);function fe({product:s,onExchange:N,userPoints:u=0}){const{t:n,formatNumber:r}=Q(),l=u>=s.points_required,t=s.is_available,f=s.stock>0||s.stock===-1,g=()=>s.stock===-1?n("store.unlimited"):s.stock===0?n("store.outOfStock"):s.stock<=5?n("store.lowStock",{count:s.stock}):n("store.inStock",{count:s.stock}),a=()=>s.stock===-1?"text-green-600":s.stock===0?"text-red-600":s.stock<=5?"text-orange-600":"text-green-600",v=()=>{const w={electronics:"ðŸ“±",books:"ðŸ“š",lifestyle:"ðŸŽ",food:"ðŸŽ",sports:"âš½",travel:"âœˆï¸",eco:"ðŸŒ±",default:"ðŸŽ"};return w[s.category]||w.default};return e.jsxs(L,{className:`h-full transition-all duration-200 hover:shadow-lg ${!t||!l?"opacity-75":"hover:scale-105"}`,children:[e.jsx(G,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-2xl",children:v()}),e.jsxs("div",{children:[e.jsx(H,{className:"text-lg line-clamp-2",children:s.name}),e.jsx(B,{className:"text-sm text-gray-500",children:n(`store.categories.${s.category}`,s.category)})]})]}),s.is_featured&&e.jsxs("div",{className:"flex items-center space-x-1 bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full text-xs",children:[e.jsx(se,{className:"h-3 w-3 fill-current"}),e.jsx("span",{children:n("store.featured")})]})]})}),e.jsxs(I,{className:"space-y-4",children:[s.images&&s.images.length>0&&e.jsx("div",{className:"aspect-video bg-gray-100 rounded-lg overflow-hidden",children:e.jsx("img",{src:s.images[0],alt:s.name,className:"w-full h-full object-cover",onError:w=>{w.target.src="/placeholder-product.png"}})}),e.jsx("p",{className:"text-sm text-gray-600 line-clamp-3",children:s.description}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-2xl font-bold text-green-600",children:r(s.points_required)}),e.jsx("span",{className:"text-sm text-gray-500",children:n("common.points")})]}),e.jsxs("div",{className:`flex items-center space-x-1 text-sm ${a()}`,children:[e.jsx(T,{className:"h-4 w-4"}),e.jsx("span",{children:g()})]})]}),s.total_exchanged>0&&e.jsxs("div",{className:"flex items-center space-x-1 text-xs text-gray-500",children:[e.jsx(ie,{className:"h-3 w-3"}),e.jsx("span",{children:n("store.exchangedCount",{count:s.total_exchanged})})]})]}),e.jsx("div",{className:"pt-2",children:t?f?l?e.jsxs(o,{onClick:()=>N(s),className:"w-full bg-green-600 hover:bg-green-700",children:[e.jsx(ee,{className:"h-4 w-4 mr-2"}),n("store.exchange")]}):e.jsx(o,{disabled:!0,className:"w-full",children:e.jsxs("span",{className:"flex items-center justify-center space-x-2",children:[e.jsx("span",{children:n("store.insufficientPoints")}),e.jsxs("span",{className:"text-xs",children:["(",n("store.need")," ",r(s.points_required-u),")"]})]})}):e.jsx(o,{disabled:!0,className:"w-full",children:n("store.outOfStock")}):e.jsx(o,{disabled:!0,className:"w-full",children:n("store.unavailable")})}),l&&t&&f&&e.jsxs("div",{className:"text-xs text-center text-gray-500",children:[n("store.afterExchange"),": ",r(u-s.points_required)," ",n("common.points")]})]})]})}function Ne({product:s,userPoints:N,isOpen:u,onClose:n,onConfirm:r,isLoading:l}){const{t,formatNumber:f}=Q(),[g,a]=m.useState(1),[v,w]=m.useState(""),[_,b]=m.useState(""),[E,O]=m.useState(""),[d,k]=m.useState({});if(!u||!s)return null;const h=s.points_required*g,M=N>=h,C=s.stock===-1?10:Math.min(s.stock,Math.floor(N/s.points_required)),F=()=>{const c={};return(g<1||g>C)&&(c.quantity=t("store.exchange.invalidQuantity")),v.trim()||(c.deliveryAddress=t("store.exchange.addressRequired")),_.trim()?/^1[3-9]\d{9}$/.test(_.trim())||(c.contactPhone=t("store.exchange.invalidPhone")):c.contactPhone=t("store.exchange.phoneRequired"),k(c),Object.keys(c).length===0},U=c=>{c.preventDefault(),F()&&r({product_id:s.id,quantity:g,delivery_address:v.trim(),contact_phone:_.trim(),notes:E.trim()})},S=c=>{const P=Math.max(1,Math.min(C,parseInt(c)||1));a(P),d.quantity&&k(D=>({...D,quantity:null}))};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs(L,{className:"border-0 shadow-none",children:[e.jsxs(G,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[e.jsxs("div",{children:[e.jsx(H,{className:"text-xl",children:t("store.exchange.title")}),e.jsx(B,{children:t("store.exchange.subtitle")})]}),e.jsx(o,{variant:"ghost",size:"sm",onClick:n,className:"h-8 w-8 p-0",children:e.jsx($,{className:"h-4 w-4"})})]}),e.jsxs(I,{className:"space-y-6",children:[e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[s.images&&s.images.length>0&&e.jsx("img",{src:s.images[0],alt:s.name,className:"w-20 h-20 object-cover rounded-lg",onError:c=>{c.target.src="/placeholder-product.png"}}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-lg",children:s.name}),e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:s.description}),e.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:"text-lg font-bold text-green-600",children:f(s.points_required)}),e.jsx("span",{className:"text-sm text-gray-500",children:t("common.points")})]}),e.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-500",children:[e.jsx(T,{className:"h-4 w-4"}),e.jsx("span",{children:s.stock===-1?t("store.unlimited"):t("store.stock",{count:s.stock})})]})]})]})]})}),e.jsxs("form",{onSubmit:U,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t("store.exchange.quantity")}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(o,{type:"button",variant:"outline",size:"sm",onClick:()=>S(g-1),disabled:g<=1,children:"-"}),e.jsx(q,{type:"number",min:"1",max:C,value:g,onChange:c=>S(c.target.value),className:"w-20 text-center"}),e.jsx(o,{type:"button",variant:"outline",size:"sm",onClick:()=>S(g+1),disabled:g>=C,children:"+"}),e.jsx("span",{className:"text-sm text-gray-500",children:t("store.exchange.maxQuantity",{max:C})})]}),d.quantity&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:d.quantity})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(ae,{className:"h-4 w-4 inline mr-1"}),t("store.exchange.deliveryAddress")]}),e.jsx(q,{type:"text",value:v,onChange:c=>{w(c.target.value),d.deliveryAddress&&k(P=>({...P,deliveryAddress:null}))},placeholder:t("store.exchange.addressPlaceholder"),className:d.deliveryAddress?"border-red-500":""}),d.deliveryAddress&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:d.deliveryAddress})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(re,{className:"h-4 w-4 inline mr-1"}),t("store.exchange.contactPhone")]}),e.jsx(q,{type:"tel",value:_,onChange:c=>{b(c.target.value),d.contactPhone&&k(P=>({...P,contactPhone:null}))},placeholder:t("store.exchange.phonePlaceholder"),className:d.contactPhone?"border-red-500":""}),d.contactPhone&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:d.contactPhone})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(ne,{className:"h-4 w-4 inline mr-1"}),t("store.exchange.notes")," (",t("common.optional"),")"]}),e.jsx("textarea",{value:E,onChange:c=>O(c.target.value),placeholder:t("store.exchange.notesPlaceholder"),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent resize-none"})]}),e.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{children:[t("store.exchange.unitPrice"),":"]}),e.jsxs("span",{children:[f(s.points_required)," ",t("common.points")]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{children:[t("store.exchange.quantity"),":"]}),e.jsx("span",{children:g})]}),e.jsx("hr",{className:"border-gray-300"}),e.jsxs("div",{className:"flex justify-between items-center font-semibold text-lg",children:[e.jsxs("span",{children:[t("store.exchange.totalCost"),":"]}),e.jsxs("span",{className:"text-green-600",children:[f(h)," ",t("common.points")]})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-600",children:[e.jsxs("span",{children:[t("store.exchange.currentPoints"),":"]}),e.jsxs("span",{children:[f(N)," ",t("common.points")]})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsxs("span",{children:[t("store.exchange.afterExchange"),":"]}),e.jsxs("span",{className:M?"text-green-600":"text-red-600",children:[f(N-h)," ",t("common.points")]})]})]})}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx(o,{type:"button",variant:"outline",onClick:n,className:"flex-1",disabled:l,children:t("common.cancel")}),e.jsx(o,{type:"submit",disabled:!M||l,className:"flex-1 bg-green-600 hover:bg-green-700",children:l?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:t("store.exchange.processing")})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ee,{className:"h-4 w-4"}),e.jsx("span",{children:t("store.exchange.confirm")})]})})]})]})]})]})})})}function ye({filters:s,onFiltersChange:N,categories:u=[],isLoading:n=!1}){const{t:r}=Q(),l=(a,v)=>{N({...s,[a]:v,page:1})},t=()=>{N({search:"",category:"",min_points:"",max_points:"",sort:"created_at",page:1})},f=s.search||s.category||s.min_points||s.max_points,g=[{value:"created_at",label:r("store.filters.sort.newest")},{value:"points_asc",label:r("store.filters.sort.pointsLowToHigh")},{value:"points_desc",label:r("store.filters.sort.pointsHighToLow")},{value:"popular",label:r("store.filters.sort.popular")},{value:"name",label:r("store.filters.sort.name")}];return e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(W,{className:"h-5 w-5 text-gray-600"}),e.jsx("h3",{className:"text-lg font-semibold",children:r("store.filters.title")})]}),f&&e.jsxs(o,{variant:"ghost",size:"sm",onClick:t,className:"text-gray-500 hover:text-gray-700",children:[e.jsx($,{className:"h-4 w-4 mr-1"}),r("store.filters.clear")]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:r("store.filters.search")}),e.jsxs("div",{className:"relative",children:[e.jsx(oe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(q,{type:"text",value:s.search,onChange:a=>l("search",a.target.value),placeholder:r("store.filters.searchPlaceholder"),className:"pl-10"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:r("store.filters.category")}),e.jsxs("select",{value:s.category,onChange:a=>l("category",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",disabled:n,children:[e.jsx("option",{value:"",children:r("store.filters.allCategories")}),u.map(a=>e.jsxs("option",{value:a.category,children:[r(`store.categories.${a.category}`,a.category),"(",a.product_count,")"]},a.category))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:r("store.filters.sortBy")}),e.jsx("select",{value:s.sort,onChange:a=>l("sort",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",disabled:n,children:g.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:r("store.filters.pointsRange")}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(q,{type:"number",value:s.min_points,onChange:a=>l("min_points",a.target.value),placeholder:r("store.filters.minPoints"),className:"w-32",min:"0"}),e.jsx("span",{className:"text-gray-500",children:"-"}),e.jsx(q,{type:"number",value:s.max_points,onChange:a=>l("max_points",a.target.value),placeholder:r("store.filters.maxPoints"),className:"w-32",min:"0"})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(o,{variant:s.category?"outline":"default",size:"sm",onClick:()=>l("category",""),className:"text-xs",children:[e.jsx(T,{className:"h-3 w-3 mr-1"}),r("store.filters.allProducts")]}),u.slice(0,5).map(a=>e.jsxs(o,{variant:s.category===a.category?"default":"outline",size:"sm",onClick:()=>l("category",a.category),className:"text-xs",children:[r(`store.categories.${a.category}`,a.category),e.jsxs("span",{className:"ml-1 text-xs opacity-75",children:["(",a.product_count,")"]})]},a.category)),e.jsxs(o,{variant:s.sort==="popular"?"default":"outline",size:"sm",onClick:()=>l("sort","popular"),className:"text-xs",children:[e.jsx(se,{className:"h-3 w-3 mr-1"}),r("store.filters.popular")]})]})}),f&&e.jsxs("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-blue-700",children:[e.jsx(W,{className:"h-4 w-4"}),e.jsxs("span",{children:[r("store.filters.activeFilters"),":"]})]})}),e.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[s.search&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-blue-100 text-blue-800",children:[r("store.filters.search"),': "',s.search,'"',e.jsx("button",{onClick:()=>l("search",""),className:"ml-1 hover:text-blue-600",children:e.jsx($,{className:"h-3 w-3"})})]}),s.category&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-blue-100 text-blue-800",children:[r(`store.categories.${s.category}`,s.category),e.jsx("button",{onClick:()=>l("category",""),className:"ml-1 hover:text-blue-600",children:e.jsx($,{className:"h-3 w-3"})})]}),(s.min_points||s.max_points)&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-blue-100 text-blue-800",children:[s.min_points||0," - ",s.max_points||"âˆž"," ",r("common.points"),e.jsx("button",{onClick:()=>{l("min_points",""),l("max_points","")},className:"ml-1 hover:text-blue-600",children:e.jsx($,{className:"h-3 w-3"})})]})]})]})]})}function qe(){const{t:s,formatNumber:N}=Q(),[u,n]=m.useState(null),[r,l]=m.useState([]),[t,f]=m.useState([]),[g,a]=m.useState(!0),[v,w]=m.useState(!1),[_,b]=m.useState(null),[E,O]=m.useState(null),[d,k]=m.useState({search:"",category:"",min_points:"",max_points:"",sort:"created_at",page:1,limit:12}),[h,M]=m.useState({page:1,pages:1,total:0}),[C,F]=m.useState(null),[U,S]=m.useState(!1);m.useEffect(()=>{(async()=>{try{const i=await ce();i.isAuthenticated&&n(i.user)}catch(i){console.error("Failed to fetch user:",i)}})()},[]),m.useEffect(()=>{c()},[d]),m.useEffect(()=>{P()},[]);const c=async()=>{try{a(!0),b(null);const x=new URLSearchParams;Object.entries(d).forEach(([y,A])=>{A&&x.append(y,A)});const i=await X.getProducts(Object.fromEntries(x)),{success:j,data:p,pagination:z}=i.data||{};j?(l(Array.isArray(p)?p:[]),M(z||{page:1,pages:1,total:Array.isArray(p)?p.length:0})):(l([]),M({page:1,pages:1,total:0}),b(s("store.errors.loadFailed")))}catch(x){console.error("Failed to fetch products:",x),b(s("store.errors.loadFailed"))}finally{a(!1)}},P=async()=>{var x;try{const j=((x=(await X.getProducts({limit:1e3,page:1})).data)==null?void 0:x.data)||[],p=new Map;j.forEach(y=>{y!=null&&y.category&&p.set(y.category,(p.get(y.category)||0)+1)});const z=Array.from(p.entries()).map(([y,A])=>({category:y,product_count:A}));f(z)}catch(i){console.error("Failed to fetch categories:",i)}},D=x=>{if(!u){b(s("store.errors.loginRequired"));return}F(x),S(!0)},te=async x=>{try{w(!0),b(null);const i=await X.exchangeProduct(x),{success:j,data:p,points_used:z,remaining_points:y}=i.data||{};if(j){const A=z??(p==null?void 0:p.points_used)??0,J=y??(p==null?void 0:p.remaining_points);O(s("store.exchange.success",{product:C.name,points:A})),n(K=>({...K,points:typeof J=="number"?J:K.points})),c(),S(!1),F(null)}else b(s("store.errors.exchangeFailed"))}catch(i){console.error("Exchange failed:",i),b(s("store.errors.exchangeFailed"))}finally{w(!1)}},V=x=>{k(i=>({...i,page:x})),window.scrollTo({top:0,behavior:"smooth"})};return u?e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:s("store.title")}),e.jsx("p",{className:"text-gray-600",children:s("store.subtitle")})]}),e.jsx("div",{className:"mt-4 md:mt-0",children:e.jsx(L,{className:"bg-gradient-to-r from-green-500 to-blue-500 text-white",children:e.jsx(I,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Z,{className:"h-8 w-8"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm opacity-90",children:s("store.yourPoints")}),e.jsxs("p",{className:"text-2xl font-bold",children:[N(u.points)," ",s("common.points")]})]})]})})})})]})}),_&&e.jsxs(Y,{variant:"destructive",className:"mb-6",children:[e.jsx(de,{className:"h-4 w-4"}),e.jsx("span",{children:_}),e.jsx(o,{variant:"ghost",size:"sm",onClick:()=>b(null),className:"ml-auto",children:"Ã—"})]}),E&&e.jsxs(Y,{variant:"default",className:"mb-6 border-green-200 bg-green-50 text-green-800",children:[e.jsx(xe,{className:"h-4 w-4"}),e.jsx("span",{children:E}),e.jsx(o,{variant:"ghost",size:"sm",onClick:()=>O(null),className:"ml-auto",children:"Ã—"})]}),e.jsx(ye,{filters:d,onFiltersChange:k,categories:t,isLoading:g}),g?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:Array.from({length:8}).map((x,i)=>e.jsx("div",{className:"animate-pulse",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-4",children:[e.jsx("div",{className:"h-48 bg-gray-200 rounded-lg mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-2/3 mb-4"}),e.jsx("div",{className:"h-10 bg-gray-200 rounded"})]})},i))}):r.length===0?e.jsx(L,{className:"text-center py-12",children:e.jsxs(I,{children:[e.jsx(T,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx(H,{className:"text-xl text-gray-600 mb-2",children:s("store.noProducts.title")}),e.jsx(B,{children:s("store.noProducts.description")}),(d.search||d.category||d.min_points||d.max_points)&&e.jsx(o,{variant:"outline",onClick:()=>k({search:"",category:"",min_points:"",max_points:"",sort:"created_at",page:1,limit:12}),className:"mt-4",children:s("store.filters.clear")})]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 mb-8",children:r.map(x=>e.jsx(fe,{product:x,userPoints:u.points,onExchange:D},x.id))}),h.pages>1&&e.jsxs("div",{className:"flex justify-center items-center space-x-2",children:[e.jsx(o,{variant:"outline",onClick:()=>V(h.page-1),disabled:h.page<=1,children:s("common.previous")}),e.jsx("div",{className:"flex space-x-1",children:Array.from({length:Math.min(5,h.pages)},(x,i)=>{let j;return h.pages<=5||h.page<=3?j=i+1:h.page>=h.pages-2?j=h.pages-4+i:j=h.page-2+i,e.jsx(o,{variant:h.page===j?"default":"outline",onClick:()=>V(j),className:"w-10",children:j},j)})}),e.jsx(o,{variant:"outline",onClick:()=>V(h.page+1),disabled:h.page>=h.pages,children:s("common.next")})]})]}),e.jsxs("div",{className:"mt-8 text-center",children:[e.jsxs(o,{variant:"outline",onClick:()=>window.location.href="/activities",className:"mr-4",children:[e.jsx(ge,{className:"h-4 w-4 mr-2"}),s("store.viewExchangeHistory")]}),e.jsxs(o,{onClick:()=>window.location.href="/calculate",className:"bg-green-600 hover:bg-green-700",children:[e.jsx(Z,{className:"h-4 w-4 mr-2"}),s("store.earnMorePoints")]})]})]}),e.jsx(Ne,{product:C,userPoints:(u==null?void 0:u.points)||0,isOpen:U,onClose:()=>{S(!1),F(null)},onConfirm:te,isLoading:v})]}):e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs(L,{className:"max-w-md w-full mx-4",children:[e.jsxs(G,{className:"text-center",children:[e.jsx(le,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx(H,{children:s("store.loginRequired.title")}),e.jsx(B,{children:s("store.loginRequired.description")})]}),e.jsx(I,{className:"text-center",children:e.jsx(o,{onClick:()=>window.location.href="/auth/login",children:s("auth.signIn")})})]})})}export{qe as default};
